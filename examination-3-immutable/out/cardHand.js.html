<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cardHand.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cardHand.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Module for playing card hand functions.
 *
 * @author Mats Loock
 * @version 1.0.0
 */

'use strict';

const Ranks = require('./Ranks');
const utils = require('./utils');

/**
 * A playing card hand.
 *
 * @typedef {Object} Hand
 * @property {number} count - The number of playing cards of the hand.
 * @property {PlayingCard[]} playingCards - The hand's playing cards.
 * @property {number} value - The hand's value.
 * @property {function} add - Returns a copy of the hand with a playing card added to it.
 * @property {function} toString - Returns a string representing the object.
 */

/**
 * Creates a new hand.
 *
 * @param {PlayingCard[]} playingCards
 *  @returns {Hand}
 */
const createHand = (playingCards = []) => {

  /**
   * The hand's playing cards.
   *
   * @type {PlayingCard[]}
   */
  const _playingCards = Object.freeze([...playingCards]);

  // Return an immutable object.
  return Object.freeze({
    count: _playingCards.length,
    playingCards: _playingCards,
    value: getValue(_playingCards),

    /**
     * Returns a copy of the hand with a playing card added to it.
     *
     * @param {PlayingCard} playingCard
     * @returns {Hand}
     */
    add: (playingCard) => createHand(utils.add(_playingCards, playingCard)),

    /**
     * Returns a string representing the object.
     *
     * @returns {string}
     */
    toString: () => _playingCards.length > 0 ?
      `${_playingCards.join(' ')} (${getValue(_playingCards)})` :
      '-'
  });
};

/**
 * Returns the hand's value.
 *
 * @returns {number}
 */
const getValue = (playingCards) => {
  // Compute the hand value where each ace is one point...
  let handValue = playingCards.reduce((sum, x) => sum + x.rank, 0);

  // ...and count exach ace as 14 point as long as the hand value i less than 21.
  let numberOfAces = playingCards.
    filter(x => x.rank === Ranks.ACE).length;
  while (numberOfAces-- > 0 &amp;&amp; handValue + 13 &lt; 21) {
    handValue += 13;
  }

  return handValue;
};

// Exports.
module.exports = {
  createHand
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#add">add</a></li><li><a href="global.html#createHand">createHand</a></li><li><a href="global.html#getValue">getValue</a></li><li><a href="global.html#toString">toString</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Tue Oct 25 2016 12:48:25 GMT+0200 (W. Europe Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
